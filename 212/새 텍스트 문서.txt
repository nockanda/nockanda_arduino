[아두이노#212] esp8266wifi 보드끼리MQTT 4편(서보모터/스탭모터)(wemos d1r1/사물인터넷(iot)시리즈#51/녹칸다/포로리야공대가자)

esp8266wifi 보드끼리MQTT 4편(서보모터/스탭모터)(wemos d1r1/사물인터넷(iot)시리즈#51/녹칸다/포로리야공대가자)
-이번편의 핵심아이디어는 클라이언트가 스마트폰이 아니라 사물인터넷보드(wemos d1r1)끼리 MQTT메시지를 주고받는 것이다!
-하나의 보드가 publish한 메시지를 단일 혹은 복수개의 보드가 subscribe한다음 정보를 표시하거나 어떤 동작을 하게끔 구현하는 예제이다!
-스마트폰을 MQTT Client로 활용하면 GUI가 모두 훌륭하게 구현되어 있기 때문에 활용하기엔 좋으나, 때때로 보드끼리 데이터를 주고 받을 필요가 있다!
-1번보드에서 가변저항을 이용해서 각도값으로 map한다음에 publish하고 2번보드에 서보모터의 각도를 제어할 수 있도록 하시오!
-1번보드에서 버튼 2개의 push데이터를 publish하면 2번보드에 스탭모터가 양의방향 혹은 음의방향으로 회전하도록 하시오!

예제 212-1-1 사물인터넷보드(wemos d1r1)에 가변저항을 A0에 연결했다!
 가변저항을 돌려서 측정되는 아날로그값을 0~180도의 값으로 map한다음에
 MQTT를 이용해서 다른쪽 사물인터넷보드로 publish하라!
 첫번째 사물인터넷보드에서 날린 각도값으로 두번째 사물인터넷보드에 서보모터 각도를 제어해보자!


212-1-1.txt
0.00MB
212-1-2.txt
0.00MB

예제 212-2-1 사물인터넷보드(wemos d1r1)에 버튼2개를 D5와 D6에 연결했다!
 D5에 연결된 버튼을 누르게되면 스탭모터의 각도를 양의방향으로 움직일수 있도록 메시지를 publish하라!
 D5에 연결된 버튼을 누르게되면 스탭모터의 각도를 음의방향으로 움직일수 있도록 메시지를 publish하라!
 +를 전송하면 양의방향으로 이동하고 -를 전송하면 음의방향으로 이동하도록하라!


212-2-1.txt
0.00MB
212-2-2.txt
0.00MB
관련라이브러리(pubsubclient)

https://pubsubclient.knolleary.net/

레퍼런스강의(esp8266에서 스탭모터사용#145-1)

https://bota.tistory.com/1380