[아두이노#187] esp8266wifi MQTT로 마그네틱센서&솔레노이드스위치 제어하기(wemos d1r1/사물인터넷(iot)시리즈#30/녹칸다/포로리야공대가자)

esp8266wifi MQTT로 마그네틱센서&솔레노이드스위치 제어하기(wemos d1r1/사물인터넷(iot)시리즈#30/녹칸다/포로리야공대가자)
-사물인터넷보드(wemos d1r1)에 마그네틱센서와 솔레노이드 스위치를 달아보자!
-솔레노이드스위치는 코일이 있어서 릴레이나 모스펫으로 제어해야할것 같다!(릴레이 당첨)
-마그네틱센서는 문이 열렸나 닫혔나를 감지할 수 있는 도어열림감지 센서이다!
-마그네틱센서의 정보를 publish해서 스마트폰에 MQTT로 날려보자!
-솔레노이드 스위치의 작동현황을 publish해서 스마트폰에 MQTT로 날려보자!
-스마트폰에서 솔레노이드스위치의 상태를 스위칭 할 수 있도록 해보자!

예제 187-1 사물인터넷보드(wemos d1r1)에 마그네틱스위치(MC38)을 D5에 연결했다!
 보드 내부 저항을 사용하는 INPUT_PULLUP 스타일로 연결했다!
 현재 도어센서에 의해서 문이 닫혔는지 열렸는지를 스마트폰으로 publish해보자!
 물론 MQTT를 이용해야한다!


187-1.txt
0.00MB

예제 187-2 앞에 했던 예제에 더해서 솔레노이드 스위치를 이용해보자!
 솔레노이드 스위치는 직접 보드에 연결하기에는 무리이므로 릴레이를 이용하자!
 릴레이를 D6에 연결하고 릴레이를통해서 솔레노이드 스위치를 제어해보자!
 스마트폰에서 MQTT를 이용해서 publish한 메시지를 바탕으로 솔레노이드 스위치를 제어해보자!


187-2.txt
0.00MB
관련라이브러리(pubsubclient)

https://pubsubclient.knolleary.net/