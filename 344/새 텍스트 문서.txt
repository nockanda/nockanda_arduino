[아두이노#344] modbus rtu기본 버전 만들기/CRC반영하기/기본적인 예제 만들어보기! (RS485/modbus rtu#1/녹칸다/포로리야공대가자)

 

(약간 불안정한 버전이라 345에서 수정필요!)
modbus rtu기본 버전 만들기/CRC반영하기/기본적인 예제 만들어보기! (RS485/modbus rtu#1/녹칸다/포로리야공대가자)
녹칸다의 rs485 modbus rtu 시리즈이다!
녹칸다의 RS485예제(#124)는 이미 구현되어있지만 자체적인 프레임 규격을 가지고 있어서 modbus에 적용하기에는 어려운 상태이다!
과거 구현했던 RS485예제를 modbus 규격에 맞도록 수정하고 아두이노와 연결해서 활용하는 것을 목표로 하는 시리즈이다!
아래와 같은 순서로 진행해보도록 하자!
1.124편에서 녹칸다가 구현했다는 예제가 뭔지 일단 살펴보기!
2.아두이노에 rs485모듈을 연결하고 modbus rtu 온습도센서(SHT20)를 사용하면서 어떤 원리로 기본 버전을 구현하면 좋을지 판단해보기!
3.슬레이브 id를 바꿀 수 있는 전략을 구상하고 EEPROM에 기록한다!
4.아두이노 2대에 RS485모듈을 연결하고 modbus rtu 형태로 데이터 송수신 해보기!
5.슬레이브에 LED를 연결해서 마스터에서 버튼입력 제어해보기!
6.슬레이브를 2대이상으로 구성해서 LED 제어해보기!
7.슬레이브에 가상의 센서가 있다치고 마스터쪽으로 데이터를 가져와보기!

#define readmode LOW
#define sendmode HIGH

SHT20 노란선(A) 하얀선(B)

레퍼런스강의(#322)
https://bota.tistory.com/1686

 


(약간 불안정한 버전이라 345에서 수정필요!)

344-1(기본적인온도값만가지고오는예제).txt
0.00MB
344-2(sht20을 사용하기위한 전용코드).txt
0.01MB
 

(약간? 개선한 코드)

(수정의 핵심: 슬레이브가 보낸 데이터가 내가 원하는 길이가 될때까지 기다린다)

344-1(기본적인온도값만가지고오는예제).txt
0.00MB
344-2(sht20을 사용하기위한 전용코드).txt
0.01MB







   
