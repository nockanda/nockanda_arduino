[아두이노#213] esp8266wifi 보드끼리MQTT 5편(릴레이/모스펫/모터드라이버L298N)(wemos d1r1/사물인터넷(iot)시리즈#52/녹칸다/포로리야공대가자)

esp8266wifi 보드끼리MQTT 5편(릴레이/모스펫/모터드라이버)(wemos d1r1/사물인터넷(iot)시리즈#52/녹칸다/포로리야공대가자)
-이번편의 핵심아이디어는 클라이언트가 스마트폰이 아니라 사물인터넷보드(wemos d1r1)끼리 MQTT메시지를 주고받는 것이다!
-하나의 보드가 publish한 메시지를 단일 혹은 복수개의 보드가 subscribe한다음 정보를 표시하거나 어떤 동작을 하게끔 구현하는 예제이다!
-스마트폰을 MQTT Client로 활용하면 GUI가 모두 훌륭하게 구현되어 있기 때문에 활용하기엔 좋으나, 때때로 보드끼리 데이터를 주고 받을 필요가 있다!
-1번보드에서 on/off버튼 2개를 이용해서 2번보드에 달린 릴레이를 제어하라!(릴레이에는 USB모터를 달아보자)
-1번보드에서 가변저항을 이용해서 2번보드에 달린 모스펫을 제어하라!(모스펫에는 USB모터를 달아보자)
-1번보드에서 방향전환버튼 2개와 가변저항을 이용해서 2번보드에 달란 모터드라이버(L298N)를 제어하라!(모터드라이버에는 USB모터를 달아보자)

예제 213-1-1 사물인터넷보드(wemos d1r1)에 버튼2개를 D5와 D6에 연결했다!
 D5를 누르면 1이라는 메시지를 MQTT로 publish하고 D6을 누르면 0이라는 메시지를 publish해보자!
 그리고 릴레이가 연결된 사물인터넷보드 클라이언트에 1이 수신되면 릴레이가 작동되고
 0이 수신되면 릴레이가 접점이 끊어지도록 구현하라!
 릴레이에는 USB선풍기가 연결되어있어서 시각적으로 결과가 도출되도록 하라!


213-1-1.txt
0.00MB
213-1-2.txt
0.00MB

예제 213-2-1 사물인터넷보드(wemos d1r1)에 가변저항을 A0에 연결했다!
 가변저항을 돌리게되면 아날로그값이 0~1023으로 측정이되는데,
 이값을 MQTT를 이용해서 다른편 클라이언트에게 publish해보라!


213-2-1.txt
0.00MB
213-2-2.txt
0.00MB

예제 213-3-1 사물인터넷보드(wemos d1r1)에 가변저항을 A0에 연결하고
 버튼(택트스위치)을 D5와 D6에 연결했다!
 가변저항을 돌리게되면 아날로그값이 0~1023으로 측정이되는데,
 이값을 MQTT를 이용해서 다른편 클라이언트에게 publish해보라!
 D5를 누르면 정방향으로 회전할 수 있는 값을 publish하고,
 D5을 누르면 역방향으로 회전할 수 있는 값을 publish해보자!


213-3-1.txt
0.00MB
213-3-2.txt
0.00MB
관련라이브러리(pubsubclient)

https://pubsubclient.knolleary.net/