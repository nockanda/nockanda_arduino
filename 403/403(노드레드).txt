[{"id":"9a0f4e5a.80d63","type":"mqtt in","z":"e03be621.b7d748","name":"","topic":"nockanda402/aircleaner/rawdata","qos":"2","datatype":"auto","broker":"8f4f6e74.2997a","nl":false,"rap":true,"rh":0,"x":170,"y":180,"wires":[["5608d682.b11628"]]},{"id":"77af35e7.347d5c","type":"debug","z":"e03be621.b7d748","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":550,"y":180,"wires":[]},{"id":"5608d682.b11628","type":"function","z":"e03be621.b7d748","name":"split","func":"var data = msg.payload.split(',');\n\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":240,"wires":[["77af35e7.347d5c","94d0012b.4277d","915afded.5e3ea","16011ea7.5d3f41","92b110d2.cb556","136bad29.c86083","716862fb.a31dec","542e0adf.4c2ed4","4d2408d7.785628","5693ba55.1a1a74","10f9b8f6.00c467","88489f07.052f"]]},{"id":"94d0012b.4277d","type":"ui_text","z":"e03be621.b7d748","group":"aa2634f1.1bbfd8","order":0,"width":0,"height":0,"name":"","label":"미세먼지농도(PM1.0)","format":"{{msg.payload[0]}}","layout":"row-spread","className":"","x":550,"y":300,"wires":[]},{"id":"915afded.5e3ea","type":"ui_text","z":"e03be621.b7d748","group":"aa2634f1.1bbfd8","order":0,"width":0,"height":0,"name":"","label":"미세먼지농도(PM2.5)","format":"{{msg.payload[1]}}","layout":"row-spread","className":"","x":560,"y":340,"wires":[]},{"id":"16011ea7.5d3f41","type":"ui_text","z":"e03be621.b7d748","group":"aa2634f1.1bbfd8","order":0,"width":0,"height":0,"name":"","label":"미세먼지농도(PM10.0)","format":"{{msg.payload[2]}}","layout":"row-spread","className":"","x":560,"y":380,"wires":[]},{"id":"92b110d2.cb556","type":"ui_text","z":"e03be621.b7d748","group":"aa2634f1.1bbfd8","order":0,"width":0,"height":0,"name":"","label":"IoT공기청정기의상태","format":"{{msg.payload[3]}}","layout":"row-spread","className":"","x":560,"y":420,"wires":[]},{"id":"136bad29.c86083","type":"ui_text","z":"e03be621.b7d748","group":"aa2634f1.1bbfd8","order":0,"width":0,"height":0,"name":"","label":"FAN의작동상태(Auto모드일때)","format":"{{msg.payload[4]}}","layout":"row-spread","className":"","x":590,"y":460,"wires":[]},{"id":"716862fb.a31dec","type":"ui_text","z":"e03be621.b7d748","group":"aa2634f1.1bbfd8","order":0,"width":0,"height":0,"name":"","label":"하한값(Auto모드일때)","format":"{{msg.payload[5]}}","layout":"row-spread","className":"","x":560,"y":500,"wires":[]},{"id":"542e0adf.4c2ed4","type":"ui_text","z":"e03be621.b7d748","group":"aa2634f1.1bbfd8","order":0,"width":0,"height":0,"name":"","label":"상한값(Auto모드일때)","format":"{{msg.payload[6]}}","layout":"row-spread","className":"","x":560,"y":540,"wires":[]},{"id":"4d2408d7.785628","type":"ui_gauge","z":"e03be621.b7d748","name":"","group":"9c2bb4e6.01d708","order":0,"width":0,"height":0,"gtype":"donut","title":"PM1.0","label":"ug/m3","format":"{{msg.payload[0]}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","className":"","x":510,"y":580,"wires":[]},{"id":"5693ba55.1a1a74","type":"ui_gauge","z":"e03be621.b7d748","name":"","group":"9c2bb4e6.01d708","order":0,"width":0,"height":0,"gtype":"donut","title":"PM2.5","label":"ug/m3","format":"{{msg.payload[1]}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","className":"","x":510,"y":620,"wires":[]},{"id":"10f9b8f6.00c467","type":"ui_gauge","z":"e03be621.b7d748","name":"","group":"9c2bb4e6.01d708","order":0,"width":0,"height":0,"gtype":"donut","title":"PM10.0","label":"ug/m3","format":"{{msg.payload[2]}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","className":"","x":520,"y":660,"wires":[]},{"id":"9ad2f0b6.66a09","type":"ui_button","z":"e03be621.b7d748","name":"","group":"27a584ab.1b0b1c","order":0,"width":0,"height":0,"passthru":false,"label":"전원OFF","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"0","payloadType":"str","topic":"topic","topicType":"msg","x":120,"y":660,"wires":[["dba5d4bf.58eda8"]]},{"id":"dba5d4bf.58eda8","type":"mqtt out","z":"e03be621.b7d748","name":"","topic":"nockanda402/aircleaner/control","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"8f4f6e74.2997a","x":470,"y":760,"wires":[]},{"id":"67b94a4b.2412b4","type":"ui_button","z":"e03be621.b7d748","name":"","group":"27a584ab.1b0b1c","order":0,"width":0,"height":0,"passthru":false,"label":"파워1단","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"1","payloadType":"str","topic":"topic","topicType":"msg","x":120,"y":700,"wires":[["dba5d4bf.58eda8"]]},{"id":"4e054395.fd8cdc","type":"ui_button","z":"e03be621.b7d748","name":"","group":"27a584ab.1b0b1c","order":0,"width":0,"height":0,"passthru":false,"label":"파워2단","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"2","payloadType":"str","topic":"topic","topicType":"msg","x":120,"y":740,"wires":[["dba5d4bf.58eda8"]]},{"id":"5a605ee8.5e278","type":"ui_button","z":"e03be621.b7d748","name":"","group":"27a584ab.1b0b1c","order":0,"width":0,"height":0,"passthru":false,"label":"파워3단","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"3","payloadType":"str","topic":"topic","topicType":"msg","x":120,"y":780,"wires":[["dba5d4bf.58eda8"]]},{"id":"fcdc83d1.764c8","type":"ui_button","z":"e03be621.b7d748","name":"","group":"27a584ab.1b0b1c","order":0,"width":0,"height":0,"passthru":false,"label":"오토모드","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"4","payloadType":"str","topic":"topic","topicType":"msg","x":120,"y":820,"wires":[["dba5d4bf.58eda8"]]},{"id":"62c00183.9af96","type":"ui_form","z":"e03be621.b7d748","name":"","label":"오토모드설정하기","group":"27a584ab.1b0b1c","order":5,"width":0,"height":0,"options":[{"label":"하한값","value":"min","type":"text","required":true,"rows":null},{"label":"상한값","value":"max","type":"text","required":true,"rows":null}],"formValue":{"min":"","max":""},"payload":"","submit":"submit","cancel":"","topic":"topic","topicType":"msg","splitLayout":"","className":"","x":160,"y":900,"wires":[["44abb36e.ad547c"]]},{"id":"44abb36e.ad547c","type":"function","z":"e03be621.b7d748","name":"출력포맷만들기","func":"var output = msg.payload.min + \",\" + msg.payload.max;\nmsg.payload = output;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":980,"wires":[["7f82bd01.0e9d44"]]},{"id":"7f82bd01.0e9d44","type":"mqtt out","z":"e03be621.b7d748","name":"","topic":"nockanda402/aircleaner/setting","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"8f4f6e74.2997a","x":570,"y":900,"wires":[]},{"id":"88489f07.052f","type":"function","z":"e03be621.b7d748","name":"SQL쿼리를 만드는지점","func":"var date = new Date();\nmsg.topic = \"insert into aircleaner(pm10,pm25,pm100,mode,fanstate,auto_min,auto_max,date) values(\"+msg.payload[0]+\",\"+msg.payload[1]+\",\"+msg.payload[2]+\",'\"+msg.payload[3]+\"','\"+msg.payload[4]+\"',\"+msg.payload[5]+\",\"+msg.payload[6]+\",'\"+date+\"')\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":80,"wires":[["f3763079.2504d"]]},{"id":"f3763079.2504d","type":"mysql","z":"e03be621.b7d748","mydb":"2f51f2aa.0979ee","name":"","x":670,"y":80,"wires":[[]]},{"id":"359c3e97.91c312","type":"ui_button","z":"e03be621.b7d748","name":"","group":"acfac087.a64ea","order":0,"width":0,"height":0,"passthru":false,"label":"조회하기","tooltip":"","color":"","bgcolor":"","className":"","icon":"","payload":"","payloadType":"str","topic":"select * from aircleaner order by num desc limit 10;","topicType":"str","x":180,"y":1120,"wires":[["7596843c.f0b90c"]]},{"id":"7596843c.f0b90c","type":"mysql","z":"e03be621.b7d748","mydb":"2f51f2aa.0979ee","name":"","x":380,"y":1120,"wires":[["e676c4a2.1ee238"]]},{"id":"e676c4a2.1ee238","type":"ui_table","z":"e03be621.b7d748","group":"acfac087.a64ea","name":"","order":1,"width":"6","height":"9","columns":[],"outputs":0,"cts":false,"x":540,"y":1100,"wires":[]},{"id":"8f4f6e74.2997a","type":"mqtt-broker","name":"","broker":"broker.mqtt-dashboard.com","port":"1883","clientid":"","usetls":false,"protocolVersion":"4","keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willPayload":"","willMsg":{},"sessionExpiry":""},{"id":"aa2634f1.1bbfd8","type":"ui_group","name":"IoT공기청정기의정보","tab":"d25c9cdc.bf5cd","order":1,"disp":true,"width":"7","collapse":false,"className":""},{"id":"9c2bb4e6.01d708","type":"ui_group","name":"미세먼지도넛차트","tab":"43797063.8a917","order":2,"disp":true,"width":"5","collapse":false,"className":""},{"id":"27a584ab.1b0b1c","type":"ui_group","name":"컨트롤패널","tab":"a5e3b699.da1ff8","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"2f51f2aa.0979ee","type":"MySQLdatabase","name":"","host":"127.0.0.1","port":"3306","db":"example403","tz":"","charset":"UTF8"},{"id":"acfac087.a64ea","type":"ui_group","name":"조회하기","tab":"de7c10a0.769e","order":1,"disp":true,"width":"6","collapse":false,"className":""},{"id":"d25c9cdc.bf5cd","type":"ui_tab","name":"공기청정기정보","icon":"info","order":1,"disabled":false,"hidden":false},{"id":"43797063.8a917","type":"ui_tab","name":"그래프로보기","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"a5e3b699.da1ff8","type":"ui_tab","name":"컨트롤패널","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"de7c10a0.769e","type":"ui_tab","name":"데이터베이스조회","icon":"dashboard","order":4,"disabled":false,"hidden":false}]