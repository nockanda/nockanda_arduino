[{"id":"ad280bdf.d00598","type":"tab","label":"플로우 1","disabled":false,"info":""},{"id":"c9b86b9c.3814f8","type":"tcp in","z":"ad280bdf.d00598","name":"","server":"server","host":"","port":"60000","datamode":"stream","datatype":"utf8","newline":"\\n","topic":"","base64":false,"x":100,"y":260,"wires":[["a91e7cb8.4d932"]]},{"id":"1015f4c4.505b0b","type":"tcp out","z":"ad280bdf.d00598","host":"","port":"","beserver":"reply","base64":false,"end":false,"name":"","x":470,"y":240,"wires":[]},{"id":"7c304d36.1cd8d4","type":"function","z":"ad280bdf.d00598","name":"메시지에코","func":"msg.payload = \"[서버응답]\" + msg.payload + \"\\n\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":300,"wires":[[]]},{"id":"d24ae8c3.fae818","type":"ui_form","z":"ad280bdf.d00598","name":"","label":"","group":"9c2bb4e6.01d708","order":0,"width":0,"height":0,"options":[{"label":"디바이스ID","value":"id","type":"text","required":true,"rows":null},{"label":"전송할내용","value":"content","type":"text","required":true,"rows":null}],"formValue":{"id":"","content":""},"payload":"","submit":"submit","cancel":"cancel","topic":"topic","topicType":"msg","splitLayout":"","className":"","x":110,"y":420,"wires":[["4eda1319.72746c"]]},{"id":"a91e7cb8.4d932","type":"function","z":"ad280bdf.d00598","name":"클라언트등록","func":"if(msg.payload[0] == '#'){\n   //디바이스 아이디인것이다!\n   //등록을 해야한다!\n   //#OK를 응답한다!\n   msg.payload = msg.payload.replace(\"\\r\",\"\");\n   msg.payload = msg.payload.replace(\"\\n\",\"\");\n   global.set(msg.payload,msg);\n   \n   msg.payload = \"#OK\\n\";\n   return msg;\n}else{\n  return null;\n}","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":180,"wires":[["1015f4c4.505b0b"]]},{"id":"4eda1319.72746c","type":"function","z":"ad280bdf.d00598","name":"","func":"//msg.payload.id \n//msg.payload.content\n\nvar socket = global.get(msg.payload.id);\n\nif(socket != null){\n    socket.payload = msg.payload.content + \"\\n\";\n}\n\nreturn socket;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":420,"wires":[["1015f4c4.505b0b"]]},{"id":"9c2bb4e6.01d708","type":"ui_group","name":"Group 2","tab":"d25c9cdc.bf5cd","order":2,"disp":true,"width":6},{"id":"d25c9cdc.bf5cd","type":"ui_tab","name":"Tab 1","icon":"dashboard","order":1}]